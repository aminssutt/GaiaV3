/* =========================
   History Page (Single Screen Layout)
   - Left: Recommendations (internal scroll only)
   - Right: 2 rows x 3 metric tiles + chart fills remaining space
   ========================= */

.history-page { width:100%; height:100%; display:flex; flex-direction:column; overflow:hidden; box-sizing:border-box; }

/* Header */
.history-header-row { display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
.history-header-left { display:flex; align-items:center; gap:18px; }
.history-header-left h1 { margin:0; font-size:3rem; font-weight:700; background:linear-gradient(135deg,#6b5b7a,#8b7a9e); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
.history-range-buttons { display:flex; gap:8px; }
.history-range-buttons .back-btn.mini { padding:10px 16px; font-size:.85rem; border-radius:20px; }
.history-range-buttons .back-btn.danger { background:linear-gradient(135deg,#dc2626,#b91c1c); box-shadow:0 4px 12px rgba(220,38,38,.35); }

/* Split */
.history-layout { flex:1; display:flex; gap:20px; min-height:0; }

/* Left */
.history-left { width:310px; display:flex; flex-direction:column; }
.history-recos-panel { background:linear-gradient(135deg,#1a1a1a,#232323); border:2px solid #333; border-radius:18px; padding:16px 16px 14px; display:flex; flex-direction:column; height:100%; }
.history-recos-panel h3 { margin:0 0 10px; font-size:1.25rem; font-weight:600; color:#fff; }
.reco-list { list-style:none; margin:0; padding:0; overflow-y:auto; flex:1; display:flex; flex-direction:column-reverse; }
.reco-item { color:#e5e5e5; font-size:.85rem; line-height:1.35rem; margin-bottom:6px; }
.reco-time { opacity:.55; margin-right:6px; font-size:.7rem; }
.reco-empty { color:#777; font-size:.85rem; }

/* Right */
.history-right { flex:1; display:flex; flex-direction:column; min-width:0; min-height:0; }
.history-metrics-grid { display:grid; grid-template-columns:repeat(3,1fr); grid-auto-rows:120px; gap:14px; margin-bottom:12px; }
.metric-tile { background:linear-gradient(135deg,#1f2937,#374151); border:2px solid #2f3542; border-radius:16px; padding:14px 16px; display:flex; flex-direction:column; align-items:flex-start; justify-content:center; gap:6px; cursor:pointer; transition:.25s; position:relative; overflow:hidden; }
.metric-tile.active { border-color:#6b5b7a; box-shadow:0 0 0 1px rgba(79,70,229,.4),0 6px 18px rgba(0,0,0,.5); }
.metric-tile:hover { transform:translateY(-3px); box-shadow:0 10px 24px rgba(0,0,0,.55); }
.metric-icon { font-size:1.8rem; }
.metric-label { font-size:1.05rem; font-weight:600; color:#fff; }
.metric-unit { font-size:.75rem; letter-spacing:.5px; opacity:.7; color:#e0e0e0; }

/* Chart */
.history-chart.new-layout { flex:1; min-height:0; background:rgba(0,0,0,0.25); border-radius:16px; padding:10px 12px 12px; display:flex; flex-direction:column; }
.chart-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:4px; }
.chart-header h3 { margin:0; font-size:1.1rem; font-weight:600; color:#fff; }
.chart-placeholder { flex:1; display:flex; align-items:center; justify-content:center; font-size:1rem; color:#888; font-style:italic; }

/* Scrollbar */
.reco-list::-webkit-scrollbar { width:6px; }
.reco-list::-webkit-scrollbar-track { background:rgba(255,255,255,0.05); border-radius:6px; }
.reco-list::-webkit-scrollbar-thumb { background:linear-gradient(#6b5b7a,#8b7a9e); border-radius:6px; }

@media (max-width:1800px) and (max-height:720px) {
  .metric-tile { padding:12px 14px; }
  .metric-icon { font-size:1.6rem; }
  .metric-label { font-size:.95rem; }
  .history-metrics-grid { grid-auto-rows:110px; gap:12px; }
  /* no height cap anymore */
}
